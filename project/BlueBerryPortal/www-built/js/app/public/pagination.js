define(["jquery","text!templates/public/pagination.html"],function(e,t){var n=function(n,r){var i=e(n).data("pagination");i?i.optons=e.extend(!0,i.options,r):(i={options:{}},i.options=e.extend(!0,e.fn.pagination.defaults,r)),e(n).data("pagination",i);var s=this.opt=i.options,o=i.options.maxPageSize,u=_.template(t);e(n).html(u({})),e(s.next).bind("click",function(){var t=e(n).pagination("options");t.pageNumber<t.maxPageSize&&(t.pageNumber+=1,t.onChange(t.pageNumber,t.pageSize))}),e(s.prev).bind("click",function(){var t=e(n).pagination("options");t.pageNumber>1&&(t.pageNumber-=1,t.onChange(t.pageNumber,t.pageSize))}),e(s.input).bind("keydown",function(t){if(t.keyCode==13){var r=e(n).pagination("options"),i=e(this).val();isNaN(i)&&(i=1),i>r.maxPageSize&&(i=r.maxPageSize,e(this).val(i)),r.pageNumber=i,r.onChange(r.pageNumber,r.pageSize)}}),e(s.query).bind("click",function(){var t=e(s.input).val(),r=e(n).pagination("options"),t=e(s.input).val();isNaN(t)&&(t=1),e(s.inputs).val(t),t>r.maxPageSize&&(t=r.maxPageSize,e(s.inputs).val(t)),r.pageNumber=t,r.onChange(r.pageNumber,r.pageSize)})},r=function(){},i=function(t,n,i){var o=n;isNaN(i)?r():(total=i,total%o.pageSize==0?maxPageSize=total/o.pageSize:maxPageSize=Math.floor(total/o.pageSize)+1,e(o.total).text(maxPageSize),n.maxPageSize=maxPageSize,e(t).pagination("options",n),s(t,n,total))},s=function(t,n,r){var i=n,s=i.pageNumber,u=Math.max(1,s-3),a=Math.min(u+i.pageSize,(r-1)/i.pageSize);e(t).find(".page-index ").css("display","none");for(var f=u;f<=a+1;f++)e(t).find(".page-index"+(f-u)).find("a").text(f),e(t).find(".page-index"+(f-u)).css("display","block");e(".web-pagination .active").removeClass("active"),e(t).find(".page-index"+(i.pageNumber-u)).addClass("active"),o(t,n)},o=function(t,n){var r=n;e(t).find(".page-index").bind("click",function(){var t=e(this).text();isNaN(t)||r.pageNumber!=parseInt(t)&&(r.pageNumber=parseInt(t),r.onChange(r.pageNumber,r.pageSize))})};e.fn.pagination=function(t,r){return typeof t=="string"?e.fn.pagination.methods[t](this,r):this.each(function(){var e=new n(this,t)})},e.fn.pagination.parseOptions=function(t,n){return state?state=e.extend(!0,state.options,n):state=e.extend(!0,e.fn.pagination.defaults,n),state},e.fn.pagination.defaults={total:0,pageSize:10,pageNumber:1,pageList:[10,20,30,50,100],displayMsg:1,first:"",target:".web-gridview",prev:".Previous",current:".current",next:".Next",last:"",input:"#txtCurrentPage",query:"#btnQuery",total:"#pageTotal",onChange:function(e,t){}},e.fn.pagination.methods={options:function(t,n){if(!n)return e(t).data("pagination").options;e(t).data("pagination",{options:n})},setTotalCount:function(e,t){var n=this.options(e);i(e,n,t)}}});