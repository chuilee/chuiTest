<!doctype html>
<html lang="en" data-framework="backbonejs">
	<head>
		<meta charset="utf-8">
		<title>backbone function test!</title>
		<link rel="stylesheet" href="../bootstrap/dist/css/bootstrap.min.css">
		<script src="bower_components/requirejs/require.js"></script>
		

	</head>
	<body>
		<div class="container">
			<h1>Backbone</h1>
			<h2>Collection</h2>
			<dl>
				<dt>pluck</dt>
				<dd>
					<pre>
var students = new Backbone.Collection([
	{ name: "chui" },
	{ name: "jay" },
	{ name: "tom" }
]);
var pluck = students.pluck( "name" );
console.log( pluck ) // ["chui", "jay", "tom"] </pre>
				</dd>
			</dl>
			<h2>View</h2>
			<dl class="dl-horizontal" id="infos">
			</dl>
		</div>
		<script type="text/template" id="template">
				<dt> Name: </dt>
				<dd> <%= name %> </dd>
				<dt> Age: </dt>
				<dd> <%= age %> </dd>
				<dt> From: </dt>
				<dd> <%= country %> </dd>
		</script>

		<script>

		require.config({
			baseUrl: "bower_components",
			paths: {
				"backbone": "backbone/backbone",
				"underscore": "underscore/underscore",
				"jquery": "jquery/jquery"
			},
			shim: {
				"backbone": {
					deps: [ "jquery", "underscore" ],
					exports: "Backbone"
				}				
			}

		})

		require( [ "backbone", "jquery" ], function( Backbone, $ ){

			// Model
			var Info = Backbone.Model.extend({

				defaults: {
					name: "Chui",
					age: 25,
					country: "China"
				}
				
			});

			var objInfo = new Info();

			// Collection
			var students = new Backbone.Collection([
					{ name: "chui" },
					{ name: "jay" },
					{ name: "tom" }
				]);
			var pluck = students.pluck( "name" );
			console.log( pluck );

			// View 
			var Infos = Backbone.View.extend( {

				_template: _.template( $( "#template" ).html() ),
				
				render: function(){

					this.$el.html( this._template( this.model.toJSON() ) );
					console.log( this.$el )
				},

				initialize: function(){

					this.render();
					

				}

			} );

			var infos = new Infos({
				model: objInfo,
				el: $( "#infos" )
			});

		} )
		</script>
	</body>
</html>
